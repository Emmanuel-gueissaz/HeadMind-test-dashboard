import { defineStore } from 'pinia';
import { useStorage } from 'src/helpers/storage';
import type { IIncident } from 'src/interfaces/IIncident';
import { ref } from 'vue';

/**
 * Store the incident
 * !! for this part there is no IHM --> you can see in local storage the change
 */
export const useIncidentsStore = defineStore('incident', () => {

  const {get, save} = useStorage<IIncident>('incident')

  const incidents = ref<any[]>(get() ?? []) // eslint-disable-line

  const add = (incident:IIncident) => {
    incidents.value.push(incident)
    save(incidents.value)
  }

  return { incidents, add }
})